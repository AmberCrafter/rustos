# Double fault occur at interrupt return

---
github info:
branch: interrupt
tag: interrupt_return_double_fault

Description:
Base on blog_os gdt and interrupt code, it works under bootloader version 0.9 with bootimage, to avoid others human of error.

---
## Note
1. Same kind of error ocurr at the brackpoint/timer interrupt return, but different in mechine code.
2. The brackpoint exception work fine without gdt setting. (Disable src/lib.rs `library::blog_gdt::init();`)

---
## Log

### Qemu -d int dump

Command
```bash
> cargo krun
```

<details>
    <summery>Qemu outputs</summery>
    Qemu args: ["-drive", "format=raw,file=/workspaces/rustos/target/x86_64-rustos-none/debug/boot-bios-rustos.img", "-d", "int", "--no-reboot", "-s", "-display", "none", "-serial", "mon:stdio"]

    ```
    Finished test [unoptimized + debuginfo] target(s) in 0.04s
    Running tests/interrupt.rs (target/x86_64-rustos-none/debug/deps/interrupt-b5aa4371b9e2d1be)
    Finished dev [unoptimized + debuginfo] target(s) in 0.01s
    Running `target/debug/image_maker /workspaces/rustos/target/x86_64-rustos-none/debug/deps/interrupt-b5aa4371b9e2d1be`
    CommandArgs { inner: ["-drive", "format=raw,file=/workspaces/rustos/target/x86_64-rustos-none/debug/deps/boot-bios-interrupt-b5aa4371b9e2d1be.img", "-d", "int", "--no-reboot", "-s", "-display", "none", "-serial", "mon:stdio"] }
    SMM: enter
    EAX=00000001 EBX=00000000 ECX=02000000 EDX=02000628
    ESI=0000000b EDI=02000000 EBP=000f246b ESP=00006ce0
    EIP=000eae06 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 00000000 ffffffff 00cf9300 DPL=0 DS   [-WA]
    CS =0008 00000000 ffffffff 00cf9b00 DPL=0 CS32 [-RA]
    SS =0010 00000000 ffffffff 00cf9300 DPL=0 DS   [-WA]
    DS =0010 00000000 ffffffff 00cf9300 DPL=0 DS   [-WA]
    FS =0010 00000000 ffffffff 00cf9300 DPL=0 DS   [-WA]
    GS =0010 00000000 ffffffff 00cf9300 DPL=0 DS   [-WA]
    LDT=0000 00000000 0000ffff 00008200 DPL=0 LDT
    TR =0000 00000000 0000ffff 00008b00 DPL=0 TSS32-busy
    GDT=     000f62c0 00000037
    IDT=     000f62fe 00000000
    CR0=00000011 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000080 CCD=00000001 CCO=LOGICB  
    EFER=0000000000000000
    SMM: after RSM
    EAX=00000001 EBX=00000000 ECX=02000000 EDX=02000628
    ESI=0000000b EDI=02000000 EBP=000f246b ESP=00006ce0
    EIP=000eae06 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    CS =0008 00000000 ffffffff 00c09b00 DPL=0 CS32 [-RA]
    SS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    DS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    FS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    GS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    LDT=0000 00000000 0000ffff 00008200 DPL=0 LDT
    TR =0000 00000000 0000ffff 00008b00 DPL=0 TSS32-busy
    GDT=     000f62c0 00000037
    IDT=     000f62fe 00000000
    CR0=00000011 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000000 CCD=00000000 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: enter
    EAX=000000b5 EBX=000f7dc9 ECX=00001234 EDX=00006cff
    ESI=00006c80 EDI=07fbec5e EBP=00006c40 ESP=00006c40
    EIP=00007dc8 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =db00 000db000 ffffffff 008f9300
    CS =f000 000f0000 ffffffff 008f9b00
    SS =0000 00000000 ffffffff 008f9300
    DS =0000 00000000 ffffffff 008f9300
    FS =0000 00000000 ffffffff 008f9300
    GS =0000 00000000 ffffffff 008f9300
    LDT=0000 00000000 0000ffff 00008200
    TR =0000 00000000 0000ffff 00008b00
    GDT=     00000000 00000000
    IDT=     00000000 000003ff
    CR0=00000010 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000000 CCD=00006c40 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: after RSM
    EAX=000000b5 EBX=000f7dc9 ECX=00001234 EDX=00006cff
    ESI=00006c80 EDI=07fbec5e EBP=00006c40 ESP=00006c40
    EIP=000f7dc9 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    CS =0008 00000000 ffffffff 00c09b00 DPL=0 CS32 [-RA]
    SS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    DS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    FS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    GS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    LDT=0000 00000000 0000ffff 00008200 DPL=0 LDT
    TR =0000 00000000 0000ffff 00008b00 DPL=0 TSS32-busy
    GDT=     000f62c0 00000037
    IDT=     000f62fe 00000000
    CR0=00000011 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000000 CCD=00000000 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: enter
    EAX=000000b5 EBX=00007de3 ECX=00005678 EDX=07fa91e0
    ESI=000e9f80 EDI=07fbec5e EBP=00006c40 ESP=00006c40
    EIP=000f7de2 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    CS =0008 00000000 ffffffff 00c09b00 DPL=0 CS32 [-RA]
    SS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    DS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    FS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    GS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    LDT=0000 00000000 0000ffff 00008200 DPL=0 LDT
    TR =0000 00000000 0000ffff 00008b00 DPL=0 TSS32-busy
    GDT=     000f62c0 00000037
    IDT=     000f62fe 00000000
    CR0=00000011 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000000 CCD=00006c2c CCO=EFLAGS  
    EFER=0000000000000000
    SMM: after RSM
    EAX=000000b5 EBX=00007de3 ECX=00005678 EDX=07fa91e0
    ESI=000e9f80 EDI=07fbec5e EBP=00006c40 ESP=00006c40
    EIP=00007de3 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =db00 000db000 ffffffff 00809300
    CS =f000 000f0000 ffffffff 00809b00
    SS =0000 00000000 ffffffff 00809300
    DS =0000 00000000 ffffffff 00809300
    FS =0000 00000000 ffffffff 00809300
    GS =0000 00000000 ffffffff 00809300
    LDT=0000 00000000 0000ffff 00008200
    TR =0000 00000000 0000ffff 00008b00
    GDT=     00000000 00000000
    IDT=     00000000 000003ff
    CR0=00000010 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000000 CCD=00000001 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: enter
    EAX=000000b5 EBX=000f7dc9 ECX=00001234 EDX=000069ff
    ESI=0000696a EDI=07fbec5e EBP=0000692a ESP=0000692a
    EIP=00007dc8 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =db00 000db000 ffffffff 008f9300
    CS =f000 000f0000 ffffffff 008f9b00
    SS =0000 00000000 ffffffff 008f9300
    DS =0000 00000000 ffffffff 008f9300
    FS =0000 00000000 ffffffff 008f9300
    GS =ca00 000ca000 ffffffff 008f9300
    LDT=0000 00000000 0000ffff 00008200
    TR =0000 00000000 0000ffff 00008b00
    GDT=     00000000 00000000
    IDT=     00000000 000003ff
    CR0=00000010 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000000 CCD=0000692a CCO=EFLAGS  
    EFER=0000000000000000
    SMM: after RSM
    EAX=000000b5 EBX=000f7dc9 ECX=00001234 EDX=000069ff
    ESI=0000696a EDI=07fbec5e EBP=0000692a ESP=0000692a
    EIP=000f7dc9 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    CS =0008 00000000 ffffffff 00c09b00 DPL=0 CS32 [-RA]
    SS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    DS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    FS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    GS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    LDT=0000 00000000 0000ffff 00008200 DPL=0 LDT
    TR =0000 00000000 0000ffff 00008b00 DPL=0 TSS32-busy
    GDT=     000f62c0 00000037
    IDT=     000f62fe 00000000
    CR0=00000011 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000000 CCD=00000000 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: enter
    EAX=000000b5 EBX=00007de3 ECX=00005678 EDX=00000005
    ESI=00000000 EDI=07fbec5e EBP=0000692a ESP=0000692a
    EIP=000f7de2 EFL=00000012 [----A--] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    CS =0008 00000000 ffffffff 00c09b00 DPL=0 CS32 [-RA]
    SS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    DS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    FS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    GS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    LDT=0000 00000000 0000ffff 00008200 DPL=0 LDT
    TR =0000 00000000 0000ffff 00008b00 DPL=0 TSS32-busy
    GDT=     000f62c0 00000037
    IDT=     000f62fe 00000000
    CR0=00000011 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000010 CCD=00006916 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: after RSM
    EAX=000000b5 EBX=00007de3 ECX=00005678 EDX=00000005
    ESI=00000000 EDI=07fbec5e EBP=0000692a ESP=0000692a
    EIP=00007de3 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =db00 000db000 ffffffff 00809300
    CS =f000 000f0000 ffffffff 00809b00
    SS =0000 00000000 ffffffff 00809300
    DS =0000 00000000 ffffffff 00809300
    FS =0000 00000000 ffffffff 00809300
    GS =ca00 000ca000 ffffffff 00809300
    LDT=0000 00000000 0000ffff 00008200
    TR =0000 00000000 0000ffff 00008b00
    GDT=     00000000 00000000
    IDT=     00000000 000003ff
    CR0=00000010 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000000 CCD=00000001 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: enter
    EAX=000000b5 EBX=000f7dc9 ECX=00001234 EDX=000069ff
    ESI=00006964 EDI=07fbec5e EBP=00006924 ESP=00006924
    EIP=00007dc8 EFL=00000006 [-----P-] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =db00 000db000 ffffffff 00809300
    CS =f000 000f0000 ffffffff 00809b00
    SS =0000 00000000 ffffffff 00809300
    DS =0000 00000000 ffffffff 00809300
    FS =0000 00000000 ffffffff 00809300
    GS =ca00 000ca000 ffffffff 00809300
    LDT=0000 00000000 0000ffff 00008200
    TR =0000 00000000 0000ffff 00008b00
    GDT=     00000000 00000000
    IDT=     00000000 000003ff
    CR0=00000010 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000004 CCD=00006924 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: after RSM
    EAX=000000b5 EBX=000f7dc9 ECX=00001234 EDX=000069ff
    ESI=00006964 EDI=07fbec5e EBP=00006924 ESP=00006924
    EIP=000f7dc9 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    CS =0008 00000000 ffffffff 00c09b00 DPL=0 CS32 [-RA]
    SS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    DS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    FS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    GS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    LDT=0000 00000000 0000ffff 00008200 DPL=0 LDT
    TR =0000 00000000 0000ffff 00008b00 DPL=0 TSS32-busy
    GDT=     000f62c0 00000037
    IDT=     000f62fe 00000000
    CR0=00000011 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000000 CCD=00000000 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: enter
    EAX=000000b5 EBX=00007de3 ECX=00005678 EDX=00000003
    ESI=07f8f5b0 EDI=07fbec5e EBP=00006924 ESP=00006924
    EIP=000f7de2 EFL=00000012 [----A--] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    CS =0008 00000000 ffffffff 00c09b00 DPL=0 CS32 [-RA]
    SS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    DS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    FS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    GS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    LDT=0000 00000000 0000ffff 00008200 DPL=0 LDT
    TR =0000 00000000 0000ffff 00008b00 DPL=0 TSS32-busy
    GDT=     000f62c0 00000037
    IDT=     000f62fe 00000000
    CR0=00000011 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000010 CCD=00006910 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: after RSM
    EAX=000000b5 EBX=00007de3 ECX=00005678 EDX=00000003
    ESI=07f8f5b0 EDI=07fbec5e EBP=00006924 ESP=00006924
    EIP=00007de3 EFL=00000006 [-----P-] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =db00 000db000 ffffffff 00809300
    CS =f000 000f0000 ffffffff 00809b00
    SS =0000 00000000 ffffffff 00809300
    DS =0000 00000000 ffffffff 00809300
    FS =0000 00000000 ffffffff 00809300
    GS =ca00 000ca000 ffffffff 00809300
    LDT=0000 00000000 0000ffff 00008200
    TR =0000 00000000 0000ffff 00008b00
    GDT=     00000000 00000000
    IDT=     00000000 000003ff
    CR0=00000010 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000004 CCD=00000001 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: enter
    EAX=000000b5 EBX=000f7dc9 ECX=00001234 EDX=000069ff
    ESI=0000696a EDI=07fbec5e EBP=0000692a ESP=0000692a
    EIP=00007dc8 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =db00 000db000 ffffffff 00809300
    CS =f000 000f0000 ffffffff 00809b00
    SS =0000 00000000 ffffffff 00809300
    DS =0000 00000000 ffffffff 00809300
    FS =0000 00000000 ffffffff 00809300
    GS =ca00 000ca000 ffffffff 00809300
    LDT=0000 00000000 0000ffff 00008200
    TR =0000 00000000 0000ffff 00008b00
    GDT=     00000000 00000000
    IDT=     00000000 000003ff
    CR0=00000010 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000000 CCD=0000692a CCO=EFLAGS  
    EFER=0000000000000000
    SMM: after RSM
    EAX=000000b5 EBX=000f7dc9 ECX=00001234 EDX=000069ff
    ESI=0000696a EDI=07fbec5e EBP=0000692a ESP=0000692a
    EIP=000f7dc9 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    CS =0008 00000000 ffffffff 00c09b00 DPL=0 CS32 [-RA]
    SS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    DS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    FS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    GS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    LDT=0000 00000000 0000ffff 00008200 DPL=0 LDT
    TR =0000 00000000 0000ffff 00008b00 DPL=0 TSS32-busy
    GDT=     000f62c0 00000037
    IDT=     000f62fe 00000000
    CR0=00000011 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000000 CCD=00000000 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: enter
    EAX=000000b5 EBX=00007de3 ECX=00005678 EDX=00000005
    ESI=00000000 EDI=07fbec5e EBP=0000692a ESP=0000692a
    EIP=000f7de2 EFL=00000012 [----A--] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    CS =0008 00000000 ffffffff 00c09b00 DPL=0 CS32 [-RA]
    SS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    DS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    FS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    GS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    LDT=0000 00000000 0000ffff 00008200 DPL=0 LDT
    TR =0000 00000000 0000ffff 00008b00 DPL=0 TSS32-busy
    GDT=     000f62c0 00000037
    IDT=     000f62fe 00000000
    CR0=00000011 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000010 CCD=00006916 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: after RSM
    EAX=000000b5 EBX=00007de3 ECX=00005678 EDX=00000005
    ESI=00000000 EDI=07fbec5e EBP=0000692a ESP=0000692a
    EIP=00007de3 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =db00 000db000 ffffffff 00809300
    CS =f000 000f0000 ffffffff 00809b00
    SS =0000 00000000 ffffffff 00809300
    DS =0000 00000000 ffffffff 00809300
    FS =0000 00000000 ffffffff 00809300
    GS =ca00 000ca000 ffffffff 00809300
    LDT=0000 00000000 0000ffff 00008200
    TR =0000 00000000 0000ffff 00008b00
    GDT=     00000000 00000000
    IDT=     00000000 000003ff
    CR0=00000010 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000000 CCD=00000001 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: enter
    EAX=000000b5 EBX=000f7dc9 ECX=00001234 EDX=000069ff
    ESI=00006964 EDI=07fbec5e EBP=00006924 ESP=00006924
    EIP=00007dc8 EFL=00000006 [-----P-] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =db00 000db000 ffffffff 00809300
    CS =f000 000f0000 ffffffff 00809b00
    SS =0000 00000000 ffffffff 00809300
    DS =0000 00000000 ffffffff 00809300
    FS =0000 00000000 ffffffff 00809300
    GS =ca00 000ca000 ffffffff 00809300
    LDT=0000 00000000 0000ffff 00008200
    TR =0000 00000000 0000ffff 00008b00
    GDT=     00000000 00000000
    IDT=     00000000 000003ff
    CR0=00000010 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000004 CCD=00006924 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: after RSM
    EAX=000000b5 EBX=000f7dc9 ECX=00001234 EDX=000069ff
    ESI=00006964 EDI=07fbec5e EBP=00006924 ESP=00006924
    EIP=000f7dc9 EFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    CS =0008 00000000 ffffffff 00c09b00 DPL=0 CS32 [-RA]
    SS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    DS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    FS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    GS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    LDT=0000 00000000 0000ffff 00008200 DPL=0 LDT
    TR =0000 00000000 0000ffff 00008b00 DPL=0 TSS32-busy
    GDT=     000f62c0 00000037
    IDT=     000f62fe 00000000
    CR0=00000011 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000000 CCD=00000000 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: enter
    EAX=000000b5 EBX=00007de3 ECX=00005678 EDX=00000003
    ESI=07ecf5b0 EDI=07fbec5e EBP=00006924 ESP=00006924
    EIP=000f7de2 EFL=00000012 [----A--] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    CS =0008 00000000 ffffffff 00c09b00 DPL=0 CS32 [-RA]
    SS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    DS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    FS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    GS =0010 00000000 ffffffff 00c09300 DPL=0 DS   [-WA]
    LDT=0000 00000000 0000ffff 00008200 DPL=0 LDT
    TR =0000 00000000 0000ffff 00008b00 DPL=0 TSS32-busy
    GDT=     000f62c0 00000037
    IDT=     000f62fe 00000000
    CR0=00000011 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000010 CCD=00006910 CCO=EFLAGS  
    EFER=0000000000000000
    SMM: after RSM
    EAX=000000b5 EBX=00007de3 ECX=00005678 EDX=00000003
    ESI=07ecf5b0 EDI=07fbec5e EBP=00006924 ESP=00006924
    EIP=00007de3 EFL=00000006 [-----P-] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =db00 000db000 ffffffff 00809300
    CS =f000 000f0000 ffffffff 00809b00
    SS =0000 00000000 ffffffff 00809300
    DS =0000 00000000 ffffffff 00809300
    FS =0000 00000000 ffffffff 00809300
    GS =ca00 000ca000 ffffffff 00809300
    LDT=0000 00000000 0000ffff 00008200
    TR =0000 00000000 0000ffff 00008b00
    GDT=     00000000 00000000
    IDT=     00000000 000003ff
    CR0=00000010 CR2=00000000 CR3=00000000 CR4=00000000
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=00000004 CCD=00000001 CCO=EFLAGS  
    EFER=0000000000000000
    Hello, this is tests::interrupt
    Running 1 tests
    interrupt::test_interrupt_breakpoint...      0: v=03 e=0000 i=1 cpl=0 IP=0008:0000000000208b50 pc=0000000000208b50 SP=0010:000000800009edb8 env->regs[R_EAX]=000000800009ee40
    RAX=000000800009ee40 RBX=0000020000000000 RCX=0000000000204e00 RDX=0000000000000001
    RSI=0000000000000000 RDI=0000000000200270 RBP=00000000000584c8 RSP=000000800009edb8
    R8 =0000000000000000 R9 =0000000000000001 R10=00000000000003f8 R11=0000000000032e20
    R12=0000000000007272 R13=0000000000000004 R14=000000000000766a R15=00000000000072ba
    RIP=0000000000208b50 RFL=00000006 [-----P-] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 0000000000000000 ffffffff 00cf9300 DPL=0 DS   [-WA]
    CS =0008 0000000000000000 ffffffff 00af9b00 DPL=0 CS64 [-RA]
    SS =0010 0000000000000000 ffffffff 00cf9300 DPL=0 DS   [-WA]
    DS =0010 0000000000000000 ffffffff 00cf9300 DPL=0 DS   [-WA]
    FS =0000 0000000000000000 0000ffff 00009300 DPL=0 DS   [-WA]
    GS =0000 0000000000000000 0000ffff 00009300 DPL=0 DS   [-WA]
    LDT=0000 0000000000000000 0000ffff 00008200 DPL=0 LDT
    TR =0010 000000000024739c 00000067 00008900 DPL=0 TSS64-avl
    GDT=     0000000000247418 0000001f
    IDT=     0000000000247480 00000fff
    CR0=80010011 CR2=0000000000000000 CR3=000000000045c000 CR4=00000020
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=0000000000000038 CCD=000000800009edc0 CCO=SUBQ    
    EFER=0000000000000d00
    EXCEPTION: BREAKPOINT
    InterruptStackFrame {
        instruction_pointer: VirtAddr(
            0x208b51,
        ),
        code_segment: 8,
        cpu_flags: 0x6,
        stack_pointer: VirtAddr(
            0x800009edb8,
        ),
        stack_segment: 16,
    }
    check_exception old: 0xffffffff new 0xd
        1: v=0d e=0010 i=0 cpl=0 IP=0008:0000000000211b58 pc=0000000000211b58 SP=0010:000000800009ed88 env->regs[R_EAX]=000000800009ee40
    RAX=000000800009ee40 RBX=0000020000000000 RCX=0000000000204e00 RDX=0000000000000001
    RSI=0000000000000000 RDI=0000000000200270 RBP=00000000000584c8 RSP=000000800009ed88
    R8 =0000000000000000 R9 =0000000000000001 R10=00000000000003f8 R11=0000000000032e20
    R12=0000000000007272 R13=0000000000000004 R14=000000000000766a R15=00000000000072ba
    RIP=0000000000211b58 RFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 0000000000000000 ffffffff 00cf9300 DPL=0 DS   [-WA]
    CS =0008 0000000000000000 ffffffff 00af9b00 DPL=0 CS64 [-RA]
    SS =0010 0000000000000000 ffffffff 00cf9300 DPL=0 DS   [-WA]
    DS =0010 0000000000000000 ffffffff 00cf9300 DPL=0 DS   [-WA]
    FS =0000 0000000000000000 0000ffff 00009300 DPL=0 DS   [-WA]
    GS =0000 0000000000000000 0000ffff 00009300 DPL=0 DS   [-WA]
    LDT=0000 0000000000000000 0000ffff 00008200 DPL=0 LDT
    TR =0010 000000000024739c 00000067 00008900 DPL=0 TSS64-avl
    GDT=     0000000000247418 0000001f
    IDT=     0000000000247480 00000fff
    CR0=80010011 CR2=0000000000000000 CR3=000000000045c000 CR4=00000020
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=0000000000000060 CCD=000000800009ed40 CCO=ADDQ    
    EFER=0000000000000d00
    check_exception old: 0xd new 0xb
        2: v=08 e=0000 i=0 cpl=0 IP=0008:0000000000211b58 pc=0000000000211b58 SP=0010:000000800009ed88 env->regs[R_EAX]=000000800009ee40
    RAX=000000800009ee40 RBX=0000020000000000 RCX=0000000000204e00 RDX=0000000000000001
    RSI=0000000000000000 RDI=0000000000200270 RBP=00000000000584c8 RSP=000000800009ed88
    R8 =0000000000000000 R9 =0000000000000001 R10=00000000000003f8 R11=0000000000032e20
    R12=0000000000007272 R13=0000000000000004 R14=000000000000766a R15=00000000000072ba
    RIP=0000000000211b58 RFL=00000002 [-------] CPL=0 II=0 A20=1 SMM=0 HLT=0
    ES =0010 0000000000000000 ffffffff 00cf9300 DPL=0 DS   [-WA]
    CS =0008 0000000000000000 ffffffff 00af9b00 DPL=0 CS64 [-RA]
    SS =0010 0000000000000000 ffffffff 00cf9300 DPL=0 DS   [-WA]
    DS =0010 0000000000000000 ffffffff 00cf9300 DPL=0 DS   [-WA]
    FS =0000 0000000000000000 0000ffff 00009300 DPL=0 DS   [-WA]
    GS =0000 0000000000000000 0000ffff 00009300 DPL=0 DS   [-WA]
    LDT=0000 0000000000000000 0000ffff 00008200 DPL=0 LDT
    TR =0010 000000000024739c 00000067 00008900 DPL=0 TSS64-avl
    GDT=     0000000000247418 0000001f
    IDT=     0000000000247480 00000fff
    CR0=80010011 CR2=0000000000000000 CR3=000000000045c000 CR4=00000020
    DR0=0000000000000000 DR1=0000000000000000 DR2=0000000000000000 DR3=0000000000000000 
    DR6=00000000ffff0ff0 DR7=0000000000000400
    CCS=0000000000000060 CCD=000000800009ed40 CCO=ADDQ    
    EFER=0000000000000d00
    [Panic]
    Error: panicked at 'EXCEPTION: DOUBLE FAULT
    InterruptStackFrame {
        instruction_pointer: VirtAddr(
            0x211b58,
        ),
        code_segment: 8,
        cpu_flags: 0x2,
        stack_pointer: VirtAddr(
            0x800009ed88,
        ),
        stack_segment: 16,
    }', src/library/blog_interrupt.rs:59:5

    QEMU: Terminated
    ```

</details>

---
### objdump optput dump
Command
```bash
> objdump -d ./target/x86_64-rustos-none/debug/rustos | grep -B100 "211b58"
```

<details>
    <summery>objdump outputs</summery>

    ```
    (empty)
    ```
</details>
